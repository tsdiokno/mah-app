<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mah App</title>
</head>
<body>

  <h1>mAh.app</h1>
  <p>Find the best powerbank for your gadget.</p>

  <input type="number" id="capacity">

  <table>
    <tr>
      <td>Powerbank1</td>
      <td>Powerbank2</td>
      <td>Powerbank3</td>
    </tr>
    <tr>
      <td id="pbank-1">3000</td>
      <td id="pbank-2">9600</td>
      <td id="pbank-3">1000</td>
    </tr>
    <tr>
      <td id="pbank-1-result">[charge cycles]</td>
      <td id="pbank-2-result">[charge cycles]</td>
      <td id="pbank-3-result">[charge cycles]</td>
    </tr>
  </table>

  <script type="text/javascript">

    var input = document.getElementById('capacity');

    // Available capacities + results container
    var capacity1 = document.getElementById('pbank-1');
    var result1 = document.getElementById('pbank-1-result');

  function isFloat(value) {
    var valueToString = value.toString();
    if( isNaN(value) || valueToString.indexOf('.') < 0 ){
    return false;
    } else {
      if(parseFloat(value)) {
        return true;
      } else {
        return false;
      }
    }
  }

    function practiceCalcFuncDo () {

      var inputValue = parseInt(input.value);

      function practiceCalcFunc(capacityVal) {

        // Calculation
        var getCapacityVal = capacityVal.innerText;
        var practiceCalc = getCapacityVal * 0.20 / inputValue;
        var practiceCalcRnd = +practiceCalc.toFixed(2);

        // Conditional displays
        if ( practiceCalcRnd >= 1 ) {
          result1.innerText = practiceCalcRnd + ' charge cycles';
        } else {
          result1.innerText = 'up to 1 charge cycle';
        }

        // Int vs. Float Validator

        // String Concotion
        practiceCalcToFloat = parseFloat(practiceCalc);
        console.log('practiceCalcToFloat ' + practiceCalcToFloat);
        practiceCalcToString = practiceCalc.toString();
        console.log('practiceCalcToString ' + practiceCalcToString);

        // Operators

        /* function resultIsInteger (calcResult) {
          if ( calcResult.indexOf('.') < 0 ) { // resultIsInteger
            console.log('an integer (x charge cycles)');
            return true;
          } else {
            return false;
          }
        } */

        /* function withDecimal (calcResult) {
          console.log('calcResult ' + calcResult);
          console.log(calcResult.indexOf('.'));
          if ( calcResult.indexOf('.') < 0 ) {
            console.log('withDecimal false');
            return false;
          } else {
            return true;
            console.log('withDecimal true');
            var indexOfDecimal = calcResult.indexOf('.');
            var numAfterDecimal = indexOfDecimal + 1;

            if ( numAfterDecimal >= 6 ) {
              console.log('numAfterDecimal is more than or equal to 6');
            }

          }
        } */ // resultIsFloat



        function resultIsSingular(calcResult) {
          if ( calcResult >= 1 && calcResult < 2 ) {
            return true;
          } else {
            return false;
          }
        } // resultIsSingular


        function resultIsZero(calcResult) {
          if ( calcResult < 1 ) {
            return true;
          } else {
            return false;
          }
        } // resultIsZero

        // Validator

        /* if ( withDecimal(sampleResult) ){
          console.log(withDecimal(sampleResult) +' a float (x charge cycles and more)');
        }

        if ( resultIsSingular(sampleResult) ){
          console.log('a 1-point-something (x charge cycle or more)');
        }

        if ( resultIsZero(sampleResult) ) {
          console.log('a zero-point-something (up to one charge cycle)');
        } */

      }

      if ( Number.isInteger(inputValue) ) { // check if input is int
        practiceCalcFunc(capacity1);
      }

    }

    // input.addEventListener('keyup', practiceCalcFuncDo, false);

    /*

    Calculation value
      1.) Make sure they're conveted to strings before passing them to the interpreter
      2.) not before num.toFixed(2)
    */

    function withDecimal (calcResult) {
      console.log('calcResult ' + calcResult);
      console.log(calcResult.indexOf('.'));

      if ( calcResult < 0.8 ) {

        console.log('less than 1 cycle');

      } else if ( calcResult >= 0.8 ) {

        console.log('about 1 cycle');

      } else if ( calcResult.indexOf('.') < 0 && calcResult < 2 ) {

        console.log('withDecimal false | up to ' + calcResult + ' cycle OR more');

      } else if ( calcResult.indexOf('.') < 0 && calcResult >= 2 ) {

        console.log('withDecimal false | up to ' + calcResult + ' cycles OR more');

      } else {

        console.log('withDecimal true');

        var indexOfDecimal = calcResult.indexOf('.');
        var numAfterDecimal = calcResult.charAt(indexOfDecimal + 1);

        if ( numAfterDecimal >= 8 && numAfterDecimal > 0 ) {
          console.log('numAfterDecimal is more than or equal to 8 | up to ' + Math.floor(calcResult) + ' cycles AND more');
        } else {
          console.log('numAfterDecimal is less than 8 | up to ' + Math.floor(calcResult) + ' cycles OR more');
        }

      }

    }

    var sampleRawInput = 0.78993652;
    var sampleRoundedInput  = +sampleRawInput.toFixed(1);
    var sampleResult= sampleRoundedInput.toString();
    //console.log('sampleResult ' + sampleResult);
    //console.log('sampleResult.indexOf the dot ' + sampleResult.indexOf('.'));

    withDecimal(sampleResult);

  </script>

</body>
</html>
