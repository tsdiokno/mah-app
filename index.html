<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mah App</title>
</head>
<body>

  <h1>mAh.app</h1>
  <p>Find the best powerbank for your gadget.</p>

  <input type="number" value="2500" id="gadget-capacity">

  <table>
    <thead>
      <tr>
        <td>Powerbank 1</td>
        <td>Powerbank 2</td>
        <td>Powerbank 3</td>
      </tr>
    </thead>
    <tr>
      <td id="pbank1-capacity">3000</td>
      <td id="pbank2-capacity">9600</td>
      <td id="pbank3-capacity">1000</td>
    </tr>
    <tr>
      <td id="pbank1-result">[charge cycles]</td>
      <td id="pbank2-result">[charge cycles]</td>
      <td id="pbank3-result">[charge cycles]</td>
    </tr>
  </table>

  <script type="text/javascript">

    function myIdentityIs(elementID) {
      console.log('myIdentityIs ' + elementID);
      return document.getElementById(elementID);
    }

    var gadgetCapacity = myIdentityIs('gadget-capacity').value;
    console.log('gadgetCapacity ' + gadgetCapacity);

    var pBank1Capacity = myIdentityIs('pbank1-capacity').innerText;
    console.log('bank1Capacity ' + pBank1Capacity);

    var pBank1Result = (pBank1Capacity * 0.2) / gadgetCapacity;
    console.log('pBank1Result ' + pBank1Result);

    var resultRounded = pBank1Result.toFixed(1);
    console.log('resultRounded ' + resultRounded);

    var resultToString = resultRounded.toString(); // analyzer-eligible result
    console.log('resultToString ' + resultToString);


    // input.addEventListener('keyup', practiceCalcFuncDo, false);

    /* ---------------------------------------------------------

    RESULT ANALYZER (DON'T TOUCH - DONE!)

    Before passing raw calculation results through the function...
    2.) round them off to n.toFixed(1).
      1.) make sure they're toString(n) before passing them to the analyzer;


    ----------------------------------------------------------- */

    function analyzeResult(calcResult) {
      console.log('calcResult ' + calcResult);
      console.log(calcResult.indexOf('.'));

      if ( calcResult < 0.8 ) { // less than 0.8

        console.log('less than 1 cycle');

      } else if ( calcResult >= 0.8 && calcResult < 1 ) { // more than 0.8 but less than 1

        console.log('a little less than 1 cycle');

      } else if ( calcResult.indexOf('.') < 0 && calcResult < 2 ) { // no decimal but just 1

        console.log('withDecimal false | up to ' + calcResult + ' cycle OR more');

      } else if ( calcResult.indexOf('.') < 0 && calcResult >= 2 ) { // no decimal and more than 1

        console.log('withDecimal false | up to ' + calcResult + ' cycles OR more');

      } else {

        console.log('withDecimal true'); // must be with decimal

        var indexOfDecimal = calcResult.indexOf('.'); // look for decimal index
        var numAfterDecimal = calcResult.charAt(indexOfDecimal + 1); // number after decimal

        if ( numAfterDecimal >= 8 ) { // number after decimal is more than or equal to 8
          console.log('numAfterDecimal is more than or equal to 8 | up to ' + Math.floor(calcResult) + ' cycles AND more');
        } else {
          console.log('numAfterDecimal is less than 8 | up to ' + Math.floor(calcResult) + ' cycles OR more');
        }

      }

    } //analyzeResult


    analyzeResult(resultToString);

  </script>

</body>
</html>
